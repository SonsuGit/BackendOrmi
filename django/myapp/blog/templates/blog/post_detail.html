{% extends 'blog/base.html' %}

{% block content %}
<h2>제목: {{ post.title }}</h2>

{% if post.writer == request.user%}
<a href="{% url 'blog:edit' pk=post.pk %}" class = 'btn btn-outline-success'>수정</a> 
<form action = "{% url 'blog:delete' pk=post.pk %}" method = 'post'>
    {% csrf_token %}
    <input type = 'submit' value = '삭제' class = 'btn btn-outline-success'></input>
</form>
{% endif %}

<p>내용: {{ post.content }}</p>
<p>작성자: {{ post.writer }}</p>
<p>작성일: {{ post.created_at }}</p>
<hr>

{% comment %} 작성화면 {% endcomment %}
<h3>댓글</h3>
<form action="{% url 'blog:cm-write' pk=post.pk %}" method = 'post'>
    {% csrf_token %}
    {{ comment_form.content }}
    <input type="submit" value = '댓글 작성' class = 'btn btn-outline-success'>
</form>
{% comment %} comments {% endcomment %}
{% comment %} if 문 {% endcomment %}
{% if comments %}
{% comment %} for 문 {% endcomment %}
    <ul>
        {% for comment in comments %}
        <li>{{ comment.content }} / {{ comment.created_at }}
            <form action="{% url 'blog:cm-delete' pk=comment.pk %}" method = 'post'>
                {% csrf_token %}
                <input type="submit" value = 'X' class = 'btn btn-outline-success'>
            </form>
        </li>
        {% endfor %}
    </ul>
{% endif %}
<hr>

{% comment %} 태그 작성 화면 {% endcomment %}
<h3>해시태그</h3>
<form action="{% url 'blog:tag-write' pk=post.pk %}" method = 'post'>
    {% csrf_token %}
    {{ hashtag_form.name }}
    <input type="submit" value='태그 작성'>
</form>
{% if hashtags %}
<ul>
    {% for hashtag in hashtags %}
    <li>{{ hashtag.name }}
        <form action="{% url 'blog:tag-delete' pk=hashtag.pk %}" method = 'post'>
            {% csrf_token %}
            <input type="submit" value = 'X' class = 'btn btn-outline-success'>
        </form>
    </li>
    {% endfor %}
</ul>
{% endif%}
{% endblock %}